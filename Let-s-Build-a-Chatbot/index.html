<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>03 提示语，做个聊天机器人 - 茶桁.MAMT</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="茶桁.MAMT"><meta name="msapplication-TileImage" content="https://qiniu.hivan.me/picGo/20230601174411.png?imgNote"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="茶桁.MAMT"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="大家好，我是茶桁。 在本次讲座中，我们将研究 OpenAI 提供的 Completion API 接口。你可能已经体验过与 ChatGPT 进行聊天的乐趣，或是利用它帮我们编写各种文本材料的便利。现在，我们可以从这个需求出发，进一步探索 Completion API 的具体用法，以及如何利用它来生成更加优质的文本。"><meta property="og:type" content="blog"><meta property="og:title" content="03 提示语，做个聊天机器人"><meta property="og:url" content="https://hivan.me/Let-s-Build-a-Chatbot/"><meta property="og:site_name" content="茶桁.MAMT"><meta property="og:description" content="大家好，我是茶桁。 在本次讲座中，我们将研究 OpenAI 提供的 Completion API 接口。你可能已经体验过与 ChatGPT 进行聊天的乐趣，或是利用它帮我们编写各种文本材料的便利。现在，我们可以从这个需求出发，进一步探索 Completion API 的具体用法，以及如何利用它来生成更加优质的文本。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hivan.me/Let-s-Build-a-Chatbot/20230601164516.png"><meta property="og:image" content="https://hivan.me/Let-s-Build-a-Chatbot/Untitled.png"><meta property="og:image" content="https://hivan.me/Let-s-Build-a-Chatbot/20230601164529.png"><meta property="article:published_time" content="2023-05-11T08:43:15.000Z"><meta property="article:modified_time" content="2023-06-01T13:34:25.038Z"><meta property="article:author" content="Hivan Du"><meta property="article:tag" content="AI"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hivan.me/Let-s-Build-a-Chatbot/20230601164516.png"><meta property="twitter:creator" content="@hivan"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hivan.me/Let-s-Build-a-Chatbot/"},"headline":"03 提示语，做个聊天机器人","image":["https://hivan.me/Let-s-Build-a-Chatbot/20230601164516.png","https://hivan.me/Let-s-Build-a-Chatbot/Untitled.png","https://hivan.me/Let-s-Build-a-Chatbot/20230601164529.png"],"datePublished":"2023-05-11T08:43:15.000Z","dateModified":"2023-06-01T13:34:25.038Z","author":{"@type":"Person","name":"Hivan Du"},"publisher":{"@type":"Organization","name":"茶桁.MAMT","logo":{"@type":"ImageObject","url":"https://hivan.me/img/logo.svg"}},"description":"大家好，我是茶桁。 在本次讲座中，我们将研究 OpenAI 提供的 Completion API 接口。你可能已经体验过与 ChatGPT 进行聊天的乐趣，或是利用它帮我们编写各种文本材料的便利。现在，我们可以从这个需求出发，进一步探索 Completion API 的具体用法，以及如何利用它来生成更加优质的文本。"}</script><link rel="canonical" href="https://hivan.me/Let-s-Build-a-Chatbot/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="茶桁.MAMT" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="茶桁.MAMT" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hivandu"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-11T08:43:15.000Z" title="5/11/2023, 4:43:15 PM">2023-05-11</time>发表</span><span class="level-item"><time dateTime="2023-06-01T13:34:25.038Z" title="6/1/2023, 9:34:25 PM">2023-06-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></span><span class="level-item">31 分钟读完 (大约4711个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">03 提示语，做个聊天机器人</h1><div class="content"><p>大家好，我是茶桁。</p>
<p>在本次讲座中，我们将研究 OpenAI 提供的 Completion API 接口。你可能已经体验过与 ChatGPT 进行聊天的乐趣，或是利用它帮我们编写各种文本材料的便利。现在，我们可以从这个需求出发，进一步探索 Completion API 的具体用法，以及如何利用它来生成更加优质的文本。</p>
<span id="more"></span>
<h2 id="ai-客服">AI 客服</h2>
<p>在我了解人工智能和自然语言生成之前，我听说过智能客服，然而我并没有亲身体验过。我想象中，智能客服的回答应该是按照固定的模板进行生成的，这样的缺点就是每次回答都会是一样的。虽然可以设计多个模板来轮换着表达相同的意思，但是最多也就是三四个模板，整体的体验可能会比较呆板。</p>
<p>但是，随着 GPT 这样的生成式语言模型的出现，我们现在可以让 AI 自动根据我们的需求来撰写文案了。只要我们将需求提供给 Open AI 提供的 Completion 接口，就能自动获得一段文本，大大提升了智能客服的质量和效率。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">openai.api_key = <span class="string">&quot;OPENAI_API_KEY&quot;</span></span><br><span class="line">COMPLETION_MODEL = <span class="string">&quot;text-davinci-003&quot;</span></span><br><span class="line"></span><br><span class="line">prompt = <span class="string">&quot;请你用朋友的语气回复给到客户，并称他为“亲”，他的订单已经发货在路上了，预计在3天之内会送达，订单号256180193592，我们很抱歉因为天气的原因物流时间比原来长，感谢他选购我们的商品。&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_response</span>(<span class="params">prompt, temperature = <span class="number">1.0</span></span>):</span><br><span class="line">    completions = openai.Completion.create (</span><br><span class="line">        engine=COMPLETION_MODEL,</span><br><span class="line">        prompt=prompt,</span><br><span class="line">        max_tokens=<span class="number">1024</span>,</span><br><span class="line">        n=<span class="number">1</span>,</span><br><span class="line">        stop=<span class="literal">None</span>,</span><br><span class="line">        temperature=temperature,</span><br><span class="line">    )</span><br><span class="line">    message = completions.choices[<span class="number">0</span>].text</span><br><span class="line">    <span class="keyword">return</span> message</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(get_response(prompt))</span><br></pre></td></tr></table></figure>
<p>可以得到回复：</p>
<blockquote>
<p>亲，你好！多谢选购我们的商品！你的订单（订单号256180193592）已发货，预计3天之内能送达。由于天气原因，物流前来比原定的时间会晚一点，抱歉给您带来不便。</p>
</blockquote>
<img src="/Let-s-Build-a-Chatbot/20230601164516.png" class="" title="img">
<p>让我们再来调用并输出一次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(get_response(prompt))</span><br></pre></td></tr></table></figure>
<p>得到回复：</p>
<blockquote>
<p>亲，您的订单256180193592已经发货，预计3天将全部到达，不过由于天气原因送货可能比期望晚点，这里深表歉意。感谢您选购我们的商品，祝您购物愉快！</p>
</blockquote>
<p><strong>我们可以看到，原始提示语是一模一样的，甚至都没改动标点符号。在连续两次调用之后，我们得到了含义相同、遣词造句不同的两份结果。</strong></p>
<p>我提供了一个简单的示例代码，利用 Open AI 提供的 Completion API 接口来生成一段合适的智能客服回复。我们给 AI 提供了一个简短的提示语，要求 AI 用亲切的语气告诉客户，订单因为天气原因延迟了。我们还指定了一些语言风格上的要求，比如要用朋友的口吻称呼客户为"亲"。</p>
<p>通过连续两次使用相同的参数，我们可以看到 AI 确实满足了我们的要求，给出了一段符合逻辑的回复。这其中包括两个难点：AI 能够正确地使用"亲"称呼客户，以及在回复中提取出了订单号并返回给了客户。</p>
<p>值得注意的是，尽管两次返回的回复意思相同，但是具体的语言表达又有所不同，这归功于我们使用了一个名为 temperature 的参数。该参数的取值范围在 0-2 之间，代表输出结果的随机性或者多样性。我们在示例代码中选择了 1.0 这个中等值，从而保证每次生成的内容都有一定的差异。如果我们将该参数设置为 0，那么每次输出的结果将非常相似。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(get_response(prompt, <span class="number">0.0</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>亲，您的订单256180193592已经发货，预计3天内会送达，由于天气原因，物流时间比原来长，我们深表歉意。感谢您选购我们的商品，祝您购物愉快！</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(get_response(prompt, <span class="number">0.0</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>亲，您的订单256180193592已经发货，预计3天内会送达，由于天气原因，物流时间比原来长，我们深表歉意。感谢您选购我们的商品，祝您购物愉快！</p>
</blockquote>
<p>这个参数该怎么设置，取决于实际使用的场景。如果对应的场景比较严肃，不希望出现差错，那么设得低一点比较合适，比如银行客服的场景。如果场景没那么严肃，有趣更加重要，比如讲笑话的机器人，那么就可以设置得高一些。</p>
<p>除了 <code>temperature</code> 之外，让我们来看看Completion这个接口的其他参数：</p>
<ol type="1">
<li><code>engine</code>：指定使用的 Open AI 模型的名称。不同的模型具有不同的特点和能力，例如生成式语言模型 GPT-3 和面向任务的模型 DALL-E，而这个参数允许您选择您想要使用的模型。在这个例子中，我们使用的是 text-davinci-003 引擎，这是 Open AI 的一个最高级的语言模型，能够根据您的提示语生成出最准确、最多样化的回答。</li>
<li><code>prompt</code>：指定模型要生成的文本的初始提示语。这个参数通常是由人类提供的，以指导模型生成适当的文本。在这个例子中，prompt 是一个字符串，要求 AI 以亲切的口吻告诉用户订单被延迟了，同时使用“亲”这个称呼。</li>
<li><code>max_tokens</code>：这个参数是用来限制 AI 生成的文本长度的，它指定了允许生成文本中的 token 的最大数量。Token 是对输入进行分割后得到的最小文本单元，可以是单词或者短语等等。在这个例子中，max_tokens 设为 4096，这是 text-davinci-003 引擎允许的最大值。需要注意的是，这个数量既包括您输入的 prompt，也包括 AI 产生的回答，两者加起来不能超过 4096 个 token。比如，如果您的 prompt 已经包含 1000 个 token，那么您设置的 max_tokens 就不能超过 3096。</li>
<li><code>n</code>：表示您希望模型生成多少个不同的文本。在这个例子中，我们将 n 设为 1，因为我们只需要生成一段回复。如果您需要多个备选项，可以将 n 设为较高的数字，然后选择其中最适合的一个。</li>
<li><code>stop</code>：指定生成的文本中的一个字符串，用于指示模型停止生成。例如，您可以将 stop 设为“”以指示模型在生成两个换行符时停止。在这个例子中，我们将 stop 设为逗号“，”，这意味着模型在生成提示语中的“亲”后停止生成。</li>
</ol>
<p>当然并不是只有这五个参数，只是目前而言我们无需了解那么多，有钻研精神又比较感兴趣的，可以去参看<a target="_blank" rel="noopener" href="https://platform.openai.com/docs/api-reference/completions/create">官方文档</a>。当然是英文版的，有能力的直接看，看不太懂的，还记得我之前在<a target="_blank" rel="noopener" href="https://www.hivan.me/Understanding%20and%20Utilizing%20AI#7b5b4c64ff164636a92957c2d16a9963">导读里教大家的方法吗</a>？</p>
<h2 id="聊天机器人">聊天机器人</h2>
<p>在前面我们了解了如何使用提示语让 AI 回答一个问题。但是，如何让 AI 与人进行对话呢？特别是如何实现多轮对话，让 GPT 能够记住上下文。例如，当用户问我们 "iPhone14 拍照好不好" 时，我们回答 "很好"，然后用户又问 "它的价格是多少" 时，我们需要理解用户指的是上面提到的 iPhone。</p>
<p>对于聊天机器人而言，理解当前用户的句子是不够的，必须能够理解整个上下文才行。然而，GPT 的模型要实现支持多轮对话也不复杂。我们只需要在提示语中增加一些小小的工作就可以了。</p>
<p>要实现问答，我们只需在提示语中，在问题之前加上 "Q: " 表示这是一个问题，然后另起一行，加上 "A: " 表示我们需要一个回答，Completion 的接口就会回答你在 "Q: " 中提出的问题。例如，当我们问 AI "麻婆豆腐怎么做" 时，它会一步一步地列出制作步骤。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">question =  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Q : 麻婆豆腐该怎么做？</span></span><br><span class="line"><span class="string">A : </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(get_response(question))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>准备好所需食材：豆腐、肉末（猪肉或鸡肉）、精盐、葱，蒜，料酒、生抽和老抽，花椒粉、白胡椒粉、辣椒粉、糖、淀粉和麻油。</p>
</blockquote>
<p>要让 AI 完成多轮对话其实也很容易，我们只需要把之前对话的内容也放到提示语里面，把整个上下文都提供给 AI。这样 AI 就能够自动根据上下文，回答下一个问题。例如，如果你接着问“那蚝油牛肉呢？”，我们不要只是把这个问题传给 AI，而是将之前的对话也一并传给 AI，那么 AI 就能够理解你问的“那蚝油牛肉呢？”是想要知道怎么做，而不是关于购买或者价格的问题。</p>
<p>Q：麻婆豆腐该怎么做？</p>
<p>A：详细的麻婆豆腐的做法</p>
<p>Q：那蚝油牛肉呢？</p>
<p>A：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">question =  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Q : 麻婆豆腐该怎么做？</span></span><br><span class="line"><span class="string">A :</span></span><br><span class="line"><span class="string">准备好所需食材：豆腐、肉末（猪肉或鸡肉）、精盐、葱，蒜，料酒、生抽和老抽，花椒粉、白胡椒粉、辣椒粉、糖、淀粉和麻油。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">一、先将肉末和调料混合在一起：肉末、精盐、料酒、生抽、老抽、花椒粉、白胡椒粉、辣椒粉和麻油各适量。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">二、另外把豆腐切成小块，然后用淀粉抓着放入沸水锅中煮5-6分钟，煮至软熟。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">三、将肉末放入油锅，小火爆炒一会。加入蒜泥、葱泥继续炒香。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">四、将豆腐放入油锅中，加入糖、适量盐、酱油和水各适量，混合均匀，中火烧开再煮至汤汁稠浓即可。 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Q: 那耗油牛肉呢？</span></span><br><span class="line"><span class="string">A: </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(get_response(question))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>耗油牛肉的做法：</p>
</blockquote>
<p>下面是一个名为 food_chatbot 的完整 Python 代码，它可以从命令行读取你的问题，并回答你的问题。你可以继续提问，这样我们就可以把整个对话过程都发送给 AI 来回答。这样的话，你可以体验一下 AI 是否能够理解整个对话过程的上下文。如果你想退出，只需在需要提问时输入“bye”即可。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">openai.api_key = <span class="string">&quot;OPENAI_API_KEY&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_gpt3</span>(<span class="params">prompt</span>):</span><br><span class="line">    response = openai.Completion.create(</span><br><span class="line">        engine=<span class="string">&quot;text-davinci-003&quot;</span>,</span><br><span class="line">        prompt=prompt,</span><br><span class="line">        max_tokens=<span class="number">512</span>,</span><br><span class="line">        n=<span class="number">1</span>,</span><br><span class="line">        stop=<span class="literal">None</span>,</span><br><span class="line">        temperature=<span class="number">0.5</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    message = response.choices[<span class="number">0</span>].text.strip()</span><br><span class="line">    <span class="keyword">return</span> message</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;你好，我是一个聊天机器人，请你提出你的问题吧?&quot;</span>)</span><br><span class="line"></span><br><span class="line">questions = []</span><br><span class="line">answers = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_prompt</span>(<span class="params">prompt, questions, answers</span>):</span><br><span class="line">    num = <span class="built_in">len</span>(answers)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        prompt += <span class="string">&quot;\n Q : &quot;</span> + questions[i]</span><br><span class="line">        prompt += <span class="string">&quot;\n A : &quot;</span> + answers[i]</span><br><span class="line">    prompt += <span class="string">&quot;\n Q : &quot;</span> + questions[num] + <span class="string">&quot;\n A : &quot;</span>        </span><br><span class="line">    <span class="keyword">return</span> prompt</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user_input = <span class="built_in">input</span>(<span class="string">&quot;&gt; &quot;</span>)</span><br><span class="line">    questions.append(user_input)</span><br><span class="line">    <span class="keyword">if</span> user_input.lower() <span class="keyword">in</span> [<span class="string">&quot;bye&quot;</span>, <span class="string">&quot;goodbye&quot;</span>, <span class="string">&quot;exit&quot;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Goodbye!&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line">    prompt = generate_prompt(<span class="string">&quot;&quot;</span>, questions, answers)</span><br><span class="line"></span><br><span class="line">    answer = ask_gpt3(prompt)</span><br><span class="line">    <span class="built_in">print</span>(answer)</span><br><span class="line">    answers.append(answer)</span><br></pre></td></tr></table></figure>
<h2 id="ai解决情感分析问题">AI解决情感分析问题</h2>
<p>在上一讲中，我们介绍了使用向量距离来进行情感分析的方法，但这种方法需要一些机器学习和数学知识。那么，我们是否能够利用自然语言提示语的方式，让 AI 帮助我们完成情感分析呢？</p>
<p>让我们来尝试一下。我们可以告诉 AI 我们想要它帮助我们判断用户评论的情感是正面还是负面，并且提供两个例子，分别是正面和负面的评论，让 AI 通过这两个例子学习如何进行情感分析。然后，我们再给 AI 一条新的评论，看看它能否正确地判断这条评论的情感。</p>
<p>在这个过程中，我们只需要调用 Completion 的 API 一次，但需要将提示语分成三个部分：</p>
<p>第一部分是告诉 AI 我们要进行情感分析；</p>
<p>第二部分是提供两个例子，以"评论："开头后面跟着具体的评论，然后是以"情感："开头后面跟着这个例子的情感；</p>
<p>第三部分是给出要进行情感分析的评论，同样以"评论："开头跟着我们想要它判断的评论，然后是以"情感："开头但后面没有内容，因为我们等待 AI 给出判断结果。</p>
<p>详细代码和实现方法可以参考下面的示例。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">prompts = <span class="string">&quot;&quot;&quot;判断一下用户的评论情感上是正面的还是负面的</span></span><br><span class="line"><span class="string">评论：120的刷新率会舒服很多，有重低音跑的感觉，特别爽，真是非常给力，特别屏幕也是超级好用，屏幕也很灵敏，使用丝滑顺畅，打游戏也很舒服拍照效果：拍照效果杠杠的，画质清晰，像素感人，发货快，包装严实，各方面都没破损，颜值很高，耐看，打开网页丝滑顺畅，游戏不掉帧，分辨率高，功能很齐全。拍照很强大，照片成像很细腻，反应速度也很快，苹果系统真的很好用，运行速度：</span></span><br><span class="line"><span class="string">14的运行速度非常快，打游戏真的太流畅了，真的非常喜欢这个手机。颜值高，手感好，拍照清晰，内存大，运行速度快，待机时间长满意太喜欢了，手感不错，拍照效果也很好，运行速度很快，音效很好，续航强，手机手感很好，电池续航也不错。其他特色：整体特别满意。外观很好看，手感拿着很有质感，屏幕看着非常好，拍照效果很不错，像素高了，新机拍照片怎么都好看。5G高速运行，超长待机一整天。</span></span><br><span class="line"><span class="string">情感：正面</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">评论：刚买完就降价，卡着降价保护时间降价</span></span><br><span class="line"><span class="string">情感：负面</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">good_case = prompts + <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">评论：外形外观：银色外观好看。</span></span><br><span class="line"><span class="string">屏幕音效：音效非常好。</span></span><br><span class="line"><span class="string">拍照效果：拍照效果优秀，完全能够满足日常需要。</span></span><br><span class="line"><span class="string">运行速度：运行速度快，高刷无延迟。</span></span><br><span class="line"><span class="string">情感：</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(get_response(good_case))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>正面</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bad_case = prompts + <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">评论：充电口有划痕，有强迫症的建议选黄道吉日抽奖</span></span><br><span class="line"><span class="string">情感</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(get_response(bad_case))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>负面</p>
</blockquote>
<img src="/Let-s-Build-a-Chatbot/Untitled.png" class="" title="img">
<p>我们重新从京东商城的 iPhone 评论区随机找两个和上次不太一样的好评和差评，可以看到，结果是准确的。这是不是很棒？我们不需要任何机器学习的相关知识，用几句话就能够轻松搞定情感分析问题。</p>
<img src="/Let-s-Build-a-Chatbot/20230601164529.png" class="" title="img">
<blockquote>
<p>常见的大模型的上下文学习能力，通过几个例子，就能回答正确的结果。</p>
</blockquote>
<p>而上面这个“给一个任务描述、给少数几个例子、给需要解决的问题”这样三个步骤的组合，也是大语言模型里使用提示语的常见套路。一般我们称之为 Few-Shots Learning（少样本学习），也就是给一个或者少数几个例子，AI 就能够举一反三，回答我们的问题。</p>
<h2 id="小结">小结</h2>
<p>在本节中，我们介绍了如何巧妙地利用提示语来让 AI 完成多种任务，通过三个例子向大家展示了 Completion 接口的强大之处。第一个例子中，我们让 AI 重写一段话，通过指定模型引擎和最大 token 数量等参数，实现了高效自然语言生成。第二个例子中，我们利用 Q 和 A 的提示语将对话历史记录传递给 AI，实现了多轮对话和上下文理解。最后一个例子中，我们将正面和负面情感的例子传递给 AI，实现了情感分析。可以看到，通过巧妙运用提示语，我们能够轻松地让大语言模型完成各种任务，这也是我们迈向通用人工智能的第一步。</p>
<h2 id="课后练习">课后练习</h2>
<p>上一讲我给出了一些数据集，通过向量距离来进行正面和负面情感的判断。那么，你能不能试着用这一讲的 Few-Shots Learning 的方法，在对应的数据集上也运行一下，看看通过这种方式进行情感分析的准确率是多少？</p>
<blockquote>
<p>在使用 GPT 类型的模型的时候，提示语非常重要。所以，有人专门制作了一个叫做 <a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/aiprm-for-chatgpt/ojnbohmppadfgpejeebfnmnknjdlckgj">AIPRM 的浏览器插件</a>，包含了很多总结出来有效的提示语。你可以试着安装，看看别人都用了什么有趣的提示语。关于更多ChatGPT浏览器插件，可以看看<a target="_blank" rel="noopener" href="https://www.hivan.me/Best%20ChatGPT%20Chrome%20Extension">这篇文章</a></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/hivandu/GPT_develop/blob/main/03_completion_api.ipynb">本节课程代码</a>可以在Github上找到</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>03 提示语，做个聊天机器人</p><p><a href="https://hivan.me/Let-s-Build-a-Chatbot/">https://hivan.me/Let-s-Build-a-Chatbot/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Hivan Du</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-05-11</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-06-01</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/AI/">AI</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6479444288ae9600196fa98e&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="https://afdian.net/item/72907364008511ee904852540025c377" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://qiniu.hivan.me/picGo/20230601221633.jpeg" alt="支付宝"></span></a><a class="button donate" href="https://www.buymeacoffee.com/hivandu" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="https://patreon.com/user?u=89473430" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="paypal" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="doo@hivan.me"><input type="hidden" name="currency_code" value="USD"></form><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://qiniu.hivan.me/IMG_4603.JPG" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/GPT-3-VS-Other-Model/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">04 GPT-3/4对比其他模型胜在哪？</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Best-ChatGPT-Chrome-Extension/"><span class="level-item">最佳 ChatGPT Chrome 扩展程序</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://hivan.me/Let-s-Build-a-Chatbot/';
            this.page.identifier = 'Let-s-Build-a-Chatbot/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'hivan' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/bdff168cf8a71c11d2712a1679a00c54?s=128" alt="茶桁"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">茶桁</p><p class="is-size-6 is-block">AI游民</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shang Hai</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">140</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">14</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hivandu" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hivandu"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com/hivan"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/hivan"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com/hivan"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.zhihu.com/column/c_1424326166602178560" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">塌缩的奇点</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhihu.com/column/hivandu" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">茶桁-知乎</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><span class="level-start"><span class="level-item">从零开始接触人工智能大模型</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-05T04:23:27.000Z">2023-06-05</time></p><p class="title"><a href="/%E4%BD%BF%E7%94%A8LLMChain%E8%BF%9E%E6%8E%A5Google%E5%92%8C%E8%AE%A1%E7%AE%97%E5%99%A8/">15. 使用LLMChain连接Google和计算器</a></p><p class="categories"><a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-02T09:14:18.000Z">2023-06-02</time></p><p class="title"><a href="/%E4%BD%BF%E7%94%A8%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E7%AE%80%E5%8C%96%E5%A4%9A%E6%AD%A5%E6%8F%90%E7%A4%BA%E8%AF%AD/">14. 使用链式调用简化多步提示语</a></p><p class="categories"><a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-28T09:50:41.000Z">2023-05-28</time></p><p class="title"><a href="/Use-AI-to-write-a-snake-game/">利用AI写一个『贪吃蛇游戏』</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-28T09:17:32.000Z">2023-05-28</time></p><p class="title"><a href="/Use-multi-step-prompts-to-ask-AI-to-write-tests-for-you/">13 使用多步提示语让AI帮你写测试</a></p><p class="categories"><a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-26T09:15:54.000Z">2023-05-26</time></p><p class="title"><a href="/AI-create-a-excel-plugin/">12 AI帮你写个小插件，轻松处理Excel文件</a></p><p class="categories"><a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="茶桁.MAMT" height="28"></a><p class="is-size-7"><span>&copy; 2023 Hivan Du</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hivandu"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'folded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>