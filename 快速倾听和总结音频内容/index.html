<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>19. 快速倾听和总结音频内容 - 茶桁.MAMT</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="茶桁.MAMT"><meta name="msapplication-TileImage" content="https://qiniu.hivan.me/picGo/20230601174411.png?imgNote"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="茶桁.MAMT"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Hi，大家好，我是茶桁。 其实到第18章的时候，我们处理文本的内容就全部都结束了，从本节课开始，我们要开始学习如何处理音频和图像。"><meta property="og:type" content="blog"><meta property="og:title" content="19. 快速倾听和总结音频内容"><meta property="og:url" content="https://hivan.me/%E5%BF%AB%E9%80%9F%E5%80%BE%E5%90%AC%E5%92%8C%E6%80%BB%E7%BB%93%E9%9F%B3%E9%A2%91%E5%86%85%E5%AE%B9/"><meta property="og:site_name" content="茶桁.MAMT"><meta property="og:description" content="Hi，大家好，我是茶桁。 其实到第18章的时候，我们处理文本的内容就全部都结束了，从本节课开始，我们要开始学习如何处理音频和图像。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://qiniu.hivan.me/picGo/20230710233219.png?imgNote"><meta property="og:image" content="https://qiniu.hivan.me/picGo/20230710232923.png?imgNote"><meta property="og:image" content="https://qiniu.hivan.me/picGo/20230704000058.png?imgNote"><meta property="article:published_time" content="2023-07-10T14:52:54.000Z"><meta property="article:modified_time" content="2023-07-11T04:25:48.561Z"><meta property="article:author" content="Hivan Du"><meta property="article:tag" content="AI"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://qiniu.hivan.me/picGo/20230710233219.png?imgNote"><meta property="twitter:creator" content="@hivan"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hivan.me/%E5%BF%AB%E9%80%9F%E5%80%BE%E5%90%AC%E5%92%8C%E6%80%BB%E7%BB%93%E9%9F%B3%E9%A2%91%E5%86%85%E5%AE%B9/"},"headline":"19. 快速倾听和总结音频内容","image":[],"datePublished":"2023-07-10T14:52:54.000Z","dateModified":"2023-07-11T04:25:48.561Z","author":{"@type":"Person","name":"Hivan Du"},"publisher":{"@type":"Organization","name":"茶桁.MAMT","logo":{"@type":"ImageObject","url":"https://hivan.me/img/logo.svg"}},"description":"Hi，大家好，我是茶桁。 其实到第18章的时候，我们处理文本的内容就全部都结束了，从本节课开始，我们要开始学习如何处理音频和图像。"}</script><link rel="canonical" href="https://hivan.me/%E5%BF%AB%E9%80%9F%E5%80%BE%E5%90%AC%E5%92%8C%E6%80%BB%E7%BB%93%E9%9F%B3%E9%A2%91%E5%86%85%E5%AE%B9/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="茶桁.MAMT" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="茶桁.MAMT" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hivandu"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-07-10T14:52:54.000Z" title="7/10/2023, 10:52:54 PM">2023-07-10</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></span></div></div><h1 class="title is-3 is-size-4-mobile">19. 快速倾听和总结音频内容</h1><div class="content"><p>Hi，大家好，我是茶桁。</p>
<p>其实到<a
href="../根据垂直需求微调模型">第18章</a>的时候，我们处理文本的内容就全部都结束了，从本节课开始，我们要开始学习如何处理音频和图像。</p>
<span id="more"></span>
<p>我不知道有没有人和我一样的习性，就是比起视频和音频文件来说，还是跟喜欢看文本文件。这其中最主要的一个原因就是因为文本内容我们可以准确定位，而对于文本内容的接收速度还取决于我们输入设备（眼睛和处理信息的脑部）速度。而音频或者视频则不然，我们必须听完讲述者所说的话，即便你开到2倍速，速度依然受限，而且无法准确定位。那有没有什么办法能快速完成对音频文件内信息的获取呢，自然就是将语音内容转换成文本的能力。</p>
<p>其实到这一步，类似于Premiere或者剪映等剪辑软件都可以完成，不仅如此，在AI大行其道的今天，市面上应该也有不少Audio2Text的服务或者应用。接下来，我们要讲的就是一个杀手级服务了。</p>
<p>没错，我要说的自然就是OpenAI，
和大多数人对OpenAI的固有印象不同的是，OpenAI其实早就发布了一个通用的语音识别模型「Whisper」，
还将对应的代码开源了。并且在今年1月份的时候，API内也提供了对应的语音识别服务。</p>
<p>下面我们来一起看看这个Whisper到底可以怎么用（那些需要总结会议内容，还有总结其他人语音教程的人有福了。）</p>
<h2 id="whisper-api-101">Whisper API 101</h2>
<p>我自己其实是播客的重度使用者，不仅是Apple自己的播客内找源，还会寻找其他的优秀源，比如「少数派」的播客内容。以前上班通勤时长一个半小时，来回就是三个小时，大把的时间在地铁里听音频。</p>
<p>可是这里有一个问题，就是在筛选优质播客源的时候，我只能通过标题和简介来做判断，并不能直接判断内容到底是不是自己感兴趣的，或者到底质量如何。而Whisper和ChatGPT出现之后，立马眼里放光，这不正好完美解决我的需求吗：通过Whisper把我想要听的语音转成文字，然后再让ChatGPT帮我做小结，用于判断这个内容到底是否符合我的口味。</p>
<p>这个网站（<a
target="_blank" rel="noopener" href="https://www.listennotes.com/">listennotes</a>）不仅可以搜索播客，还能够下载到播客的源文件。而且，该网站还具有一个非常实用的功能，能够直接切出播客中的片段并创建切片（clip）。在课程的最后的随堂数据中，已下载好了
MP3 文件。此外，我们可以尝试使用 Whisper 的 API
对小片段进行处理，相应的切片链接和资源我会放在文章末尾。</p>
<p>OpenAI 提供的 Whisper API 非常简单，只需调用 transcribe
函数即可将音频文件转录为文字。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openai, os</span><br><span class="line"></span><br><span class="line">openai.api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line">audio_file= <span class="built_in">open</span>(<span class="string">&quot;./data/podcast_clip.mp3&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">transcript = openai.Audio.transcribe(<span class="string">&quot;whisper-1&quot;</span>, audio_file)</span><br><span class="line"><span class="built_in">print</span>(transcript[<span class="string">&#x27;text&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">欢迎来到 Onboard 真实的一线经验 走新的投资思考 我是 Monica 我是高宁 我们一起聊聊软件如何改变世界 大家好 欢迎来到 Onboard 我是 Monica 自从OpenAI发布的ChatGBT 掀起了席卷世界的AI热潮 不到三个月就积累了 超过一亿的越货用户 超过1300万的日货用户 真的是展现了AI让人惊讶的 也让很多人直呼 这就是下一个互联网的未来 有不少观众都说 希望我们再做一期AI的讨论 于是这次硬核讨论就来了 这次我们请来了 Google Brain的研究员雪芝 她是Google大语言模型PALM Pathway Language Model的作者之一 要知道这个模型的参数量 是GPT-3的三倍还多 另外还有两位AI产品大牛 一位来自著名的StableDM 背后的商业公司Stability AI 另一位来自某硅谷科技大厂 也曾在吴恩达教授的Landing AI中 担任产品负责人 此外 莫妮凯还邀请到一位 一直关注AI的投资人朋友Bill 当做我的特邀共同主持嘉宾 我们主要讨论几个话题 一方面从研究的视角 最前沿的研究者在关注什么 现在技术的天花板 和未来大的变量可能会在哪里 第二个问题是 未来大的变量可能会在哪里 从产品和商业的角度 什么是一个好的AI产品 整个生态可能随着技术 有怎样的演变 更重要的 我们又能从上一波 AI的创业热潮中学到什么 最后 莫妮凯和Bill还会从投资人的视角 做一个回顾 总结和畅想 这里还有一个小的update 在本集发布的时候 Google也对爆发式增长的 Chad GPT做出了回应 正在测试一个基于Lambda 模型的聊天机器人 ApprenticeBot 正式发布后会有怎样的惊喜 我们都拭目以待 AI无疑是未来几年 最令人兴奋的变量之一 莫妮凯也希望未来能邀请到更多 一线从业者 从不同角度讨论这个话题 不论是想要做创业 研究 产品 还是投资的同学 希望这些对话 对于大家了解这些技术演进 商业的可能 甚至未来对于我们每个人 每个社会意味着什么 都能引发一些思考 提供一些启发 这次的讨论有些技术硬核 需要各位对生成式AI 大模型都有一些基础了解 讨论中涉及到的论文和重要概念 也会总结在本集的简介中 供大家复习参考 几位嘉宾在北美工作生活多年 夹杂英文在所难免 也请大家体谅了 欢迎来到未来 希望大家enjoy</span><br></pre></td></tr></table></figure>
<p>我们可以看到，输出的结果虽然效果很好，中英文混杂也被正确的识别出来了。但是我们仍然需要注意一点，就是转录出来的内容全都是空格分隔的，没有任何的标点符号。这为我们之后的处理增加了一些难度。</p>
<p>面对这种问题其实也好解决，加一个Prompt参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">audio_file= <span class="built_in">open</span>(<span class="string">&quot;./data/podcast_clip.mp3&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">transcript = openai.Audio.transcribe(<span class="string">&quot;whisper-1&quot;</span>, audio_file, </span><br><span class="line">                                     prompt=<span class="string">&quot;这是一段中文播客内容。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(transcript[<span class="string">&#x27;text&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">欢迎来到 Onboard,真实的一线经验,走新的投资思考。 我是 Monica。 我是高宁。我们一起聊聊软件如何改变世界。 大家好,欢迎来到 Onboard,我是 Monica。 自从 OpenAI 发布的 ChatGBT 掀起了席卷世界的 AI 热潮, 不到三个月就积累了超过一亿的越活用户,超过一千三百万的日活用户。 真的是展现了 AI 让人惊叹的能力, 也让很多人直呼这就是下一个互联网的未来。 有不少观众都说希望我们再做一期 AI 的讨论, 于是这次硬核讨论就来了。 这次我们请来了 Google Brain 的研究员雪芝, 她是 Google 大语言模型 PAMP,Pathway Language Model 的作者之一。 要知道,这个模型的参数量是 GPT-3 的三倍还多。 另外还有两位 AI 产品大牛,一位来自著名的 Stable Diffusion 背后的商业公司 Stability AI, 另一位来自某硅谷科技大厂,也曾在吴恩达教授的 Landing AI 中担任产品负责人。 此外,Monica 还邀请到一位一直关注 AI 的投资人朋友 Bill 当作我的特邀共同主持嘉宾。 我们主要讨论几个话题,一方面从研究的视角,最前沿的研究者在关注什么? 现在技术的天花板和未来大的变量可能会在哪里? 从产品和商业的角度,什么是一个好的 AI 产品? 整个生态可能随着技术有怎样的演变? 更重要的,我们又能从上一波 AI 的创业热潮中学到什么? 最后,Monica 和 Bill 还会从投资人的视角做一个回顾、总结和畅想。 这里还有一个小的 update,在本集发布的时候, Google 也对爆发式增长的ChatGPT 做出了回应, 正在测试一个基于 Lambda 模型的聊天机器人 ApprenticeBot。 正式发布后会有怎样的惊喜?我们都拭目以待。 AI 无疑是未来几年最令人兴奋的变量之一, Monica 也希望未来能邀请到更多一线从业者从不同角度讨论这个话题。 不论是想要做创业、研究、产品还是投资的同学, 希望这些对话对于大家了解这些技术演进、商业的可能, 甚至未来对于我们每个人、每个社会意味着什么, 都能引发一些思考,提供一些启发。 这次的讨论有些技术硬核,需要各位对生成式 AI 大模型都有一些基础了解。 讨论中涉及到的论文和重要概念,也会总结在本集的简介中,供大家复习参考。 几位嘉宾在北美工作生活多年,夹杂英文在所难免,也请大家体谅了。 欢迎来到未来,大家 enjoy!</span><br></pre></td></tr></table></figure>
<p>调用 transcribe 函数时，我们使用 Prompt 参数指导 Whisper
模型，其中包含中文引导语和标点符号。这确保了转录结果包含正确的标点。但是，转录结果在中英文混合时存在多余空格的问题。因此，我们依然还需要修改
Prompt，使用中英文混排的引导语，并且不留空格，以解决这个问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">audio_file= <span class="built_in">open</span>(<span class="string">&quot;./data/podcast_clip.mp3&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">transcript = openai.Audio.transcribe(<span class="string">&quot;whisper-1&quot;</span>, audio_file, </span><br><span class="line">                                     prompt=<span class="string">&quot;这是一段Onboard播客的内容。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(transcript[<span class="string">&#x27;text&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">欢迎来到Onboard,真实的一线经验,走新的投资思考。 我是Monica,我是高宁,我们一起聊聊软件如何改变世界。 大家好,欢迎来到Onboard,我是Monica。 自从OpenAI发布的ChatGBT掀起了席卷世界的AI热潮, 不到三个月就积累了超过一亿的越活用户,超过1300万的日活用户。 真的是展现了AI让人惊叹的能力,也让很多人直呼这就是下一个互联网的未来。 有不少观众都说希望我们再做一期AI的讨论,于是这次硬核讨论就来了。 这次我们请来了Google Brain的研究员雪芝, 她是Google大语言模型POM,Pathway Language Model的作者之一。 要知道这个模型的参数量是GPT-3的三倍还多。 另外还有两位AI产品大牛,一位来自著名的Stable Diffusion背后的商业公司Stability AI, 另一位来自某硅谷科技大厂,也曾在吴恩达教授的Landing AI中担任产品负责人。 此外,Monica还邀请到一位一直关注AI的投资人朋友Bill,当做我的特邀共同主持嘉宾。 我们主要讨论几个话题,一方面从研究的视角,最前沿的研究者在关注什么? 现在的技术的天花板和未来大的变量可能会在哪里? 从产品和商业的角度,什么是一个好的AI产品? 整个生态可能随着技术有怎样的演变? 更重要的,我们又能从上一波AI的创业热潮中学到什么? 最后,Monica和Bill还会从投资人的视角做一个回顾、总结和畅想。 这里还有一个小的update,在本集发布的时候, Google也对爆发式增长的ChatGPT做出了回应, 正在测试一个基于Lambda模型的聊天机器人ApprenticeBot。 正式发布后会有怎样的惊喜?我们都拭目以待。 AI无疑是未来几年最令人兴奋的变量之一, Monica也希望未来能邀请到更多一线从业者从不同角度讨论这个话题。 不论是想要做创业、研究、产品还是投资的同学, 希望这些对话对于大家了解这些技术演进、商业的可能, 甚至未来对于我们每个人、每个社会意味着什么, 都能引发一些思考,提供一些启发。 这次的讨论有些技术硬核,需要各位对生成式AI、大模型都有一些基础了解。 讨论中涉及到的论文和重要概念,也会总结在本集的简介中,供大家复习参考。 几位嘉宾在北美工作生活多年,夹杂英文在所难免,也请大家体谅了。 欢迎来到未来,大家enjoy!</span><br></pre></td></tr></table></figure>
<p>可以看到，输出结果的英文前后也就没有空格了。为了更好地进行语音识别，Whisper模型在音频内容转录之前提供了一段提示。如果您认为音频中会出现许多专有名词，模型容易出错，您可以在提示中添加相应的专有名词。例如，在上面的内容转录中，模型听错了ChatGPT，将其变成了ChatGBT。Google的PALM模型也听错了，将其听成了POM。对应的全称Pathways
Language
Model也缺少了一个s。针对这些错误和遗漏，我们只需要修改一下提示，就可以得到正确的转录结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">audio_file= <span class="built_in">open</span>(<span class="string">&quot;./data/podcast_clip.mp3&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">transcript = openai.Audio.transcribe(<span class="string">&quot;whisper-1&quot;</span>, audio_file, </span><br><span class="line">                                     prompt=<span class="string">&quot;这是一段Onboard播客，里面会聊到ChatGPT以及PALM这个大语言模型。这个模型也叫做Pathways Language Model。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(transcript[<span class="string">&#x27;text&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">欢迎来到Onboard,真实的一线经验,走新的投资思考。我是Monica。 我是高宁。我们一起聊聊软件如何改变世界。 大家好,欢迎来到Onboard,我是Monica。 自从OpenAI发布的ChatGPT掀起了席卷世界的AI热潮,不到三个月就积累了超过一亿的越活用户,超过1300万的日活用户。 真的是展现了AI让人惊叹的能力,也让很多人直呼这就是下一个互联网的未来。 有不少观众都说希望我们再做一期AI的讨论,于是这次硬核讨论就来了。 这次我们请来了Google Brain的研究员雪芝,她是Google大语言模型PALM Pathways Language Model的作者之一。 要知道,这个模型的参数量是GPT-3的三倍还多。 另外还有两位AI产品大牛,一位来自著名的Stable Diffusion背后的商业公司Stability AI, 另一位来自某硅谷科技大厂,也曾在吴恩达教授的Landing AI中担任产品负责人。 此外,Monica还邀请到一位一直关注AI的投资人朋友Bill当作我的特邀共同主持嘉宾。 我们主要讨论几个话题,一方面从研究的视角,最前沿的研究者在关注什么? 现在的技术的天花板和未来大的变量可能会在哪里? 从产品和商业的角度,什么是一个好的AI产品? 整个生态可能随着技术有怎样的演变? 更重要的,我们又能从上一波AI的创业热潮中学到什么? 最后,Monica和Bill还会从投资人的视角做一个回顾、总结和畅想。 这里还有一个小的update,在本集发布的时候,Google也对爆发式增长的Chat GPT做出了回应。 正在测试一个基于Lambda模型的聊天机器人ApprenticeBot。 证实发布后会有怎样的惊喜,我们都拭目以待。 AI无疑是未来几年最令人兴奋的变量之一。 Monica也希望未来能邀请到更多一线从业者从不同角度讨论这个话题。 不论是想要做创业、研究、产品还是投资的同学, 希望这些对话对于大家了解这些技术演进、商业的可能,甚至未来对于我们每个人、每个社会意味着什么都能引发一些思考,提供一些启发。 这次的讨论有些技术硬核,需要各位对生成式AI大模型都有一些基础了解。 讨论中涉及到的论文和重要概念也会总结在本集的简介中,供大家复习参考。 几位嘉宾在北美工作生活多年,夹杂英文在所难免,也请大家体谅了。 欢迎来到未来,大家enjoy!</span><br></pre></td></tr></table></figure>
<p>Whisper 模型是一种类似于 GPT
的模型。它使用之前生成的文本来预测下一帧音频的内容。在文本 Prompt
前面添加内容会影响后面识别出的内容的概率，从而实现“纠错”的作用。</p>
<p>transcribe 接口还支持以下三个参数：</p>
<ul>
<li>response_format：返回的文件格式。默认为 JSON。你还可以选择 TEXT 或
SRT 和 VTT 格式。</li>
<li>temperature：用于调整采样下一帧时的概率分布。</li>
<li>language：音频的语言。提前指定音频的语言有助于提高模型的识别准确率和速度。</li>
</ul>
<p>可以更改这些参数，以查看效果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">audio_file= <span class="built_in">open</span>(<span class="string">&quot;./data/podcast_clip.mp3&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">transcript = openai.Audio.transcribe(<span class="string">&quot;whisper-1&quot;</span>, audio_file, response_format=<span class="string">&quot;srt&quot;</span>,</span><br><span class="line">                                     prompt=<span class="string">&quot;这是一段Onboard播客，里面会聊到PALM这个大语言模型。这个模型也叫做Pathways Language Model。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(transcript)</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">00:00:01,000 --&gt; 00:00:07,000</span><br><span class="line">欢迎来到Onboard,真实的一线经验,走新的投资思考。我是Monica。</span><br><span class="line">2</span><br><span class="line">00:00:07,000 --&gt; 00:00:11,000</span><br><span class="line">我是高宁。我们一起聊聊软件如何改变世界。</span><br><span class="line">3</span><br><span class="line">00:00:15,000 --&gt; 00:00:17,000</span><br><span class="line">大家好,欢迎来到Onboard,我是Monica。</span><br><span class="line">4</span><br><span class="line">00:00:17,000 --&gt; 00:00:28,000</span><br><span class="line">自从OpenAI发布的ChatGBT掀起了席卷世界的AI热潮,不到三个月就积累了超过一亿的越活用户,超过1300万的日活用户。</span><br><span class="line">5</span><br><span class="line">00:00:28,000 --&gt; 00:00:34,000</span><br><span class="line">真的是展现了AI让人惊叹的能力,也让很多人直呼这就是下一个互联网的未来。</span><br><span class="line">6</span><br><span class="line">00:00:34,000 --&gt; 00:00:41,000</span><br><span class="line">有不少观众都说希望我们再做一期AI的讨论,于是这次硬核讨论就来了。</span><br><span class="line">7</span><br><span class="line">...</span><br><span class="line">欢迎来到未来,大家enjoy!</span><br></pre></td></tr></table></figure>
<h2 id="顺手帮我翻译下">顺手帮我翻译下</h2>
<p>除了基本的音频转录功能，Whisper 的 API
还提供了一个名为“translation”的额外接口。在转录音频时，该接口可以直接将语音翻译成英文。我们不妨试一下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">audio_file= <span class="built_in">open</span>(<span class="string">&quot;./data/podcast_clip.mp3&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">translated_prompt=<span class="string">&quot;&quot;&quot;This is a podcast discussing ChatGPT and PaLM model. </span></span><br><span class="line"><span class="string">The full name of PaLM is Pathways Language Model.&quot;&quot;&quot;</span></span><br><span class="line">transcript = openai.Audio.translate(<span class="string">&quot;whisper-1&quot;</span>, audio_file, </span><br><span class="line">                                    prompt=translated_prompt)</span><br><span class="line"><span class="built_in">print</span>(transcript[<span class="string">&#x27;text&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Welcome to Onboard. Real first-line experience. New investment thinking. I am Monica. I am Gao Ning. Let&#x27;s talk about how software can change the world. Hello everyone, welcome to Onboard. I am Monica. Since the release of ChatGPT by OpenAI, the world&#x27;s AI has been in a frenzy. In less than three months, it has accumulated more than 100 million active users, and more than 13 million active users. It really shows the amazing ability of AI. It also makes many people say that this is the future of the next Internet. Many viewers said that they wanted us to do another AI discussion. So this discussion came. This time we invited a researcher from Google Brain, Xue Zhi. He is one of the authors of Google&#x27;s large-scale model PaLM, Pathways Language Model. You should know that the number of parameters of this model is three times more than ChatGPT-3. In addition, there are two AI product big cows. One is from the famous company behind Stable Diffusion, Stability AI. The other is from a Silicon Valley technology factory. He was also the product manager in Professor Wu Wenda&#x27;s Landing AI. In addition, Monica also invited a friend of AI who has been paying attention to AI, Bill, as my special guest host. We mainly discuss several topics. On the one hand, from the perspective of research, what are the most cutting-edge researchers paying attention to? Where are the cutting-edge technologies and the large variables of the future? From the perspective of products and business, what is a good AI product? What kind of evolution may the whole state follow? More importantly, what can we learn from the previous wave of AI entrepreneurship? Finally, Monica and Bill will also make a review, summary and reflection from the perspective of investors. Here is a small update. When this issue was released, Google also responded to the explosive growth of ChatGPT. We are testing an Apprentice Bot based on Lambda model. What kind of surprises will be released? We are looking forward to it. AI is undoubtedly one of the most exciting variables in the coming years. Monica also hopes to invite more first-line entrepreneurs to discuss this topic from different angles. Whether you want to do entrepreneurship, research, product or investment, I hope these conversations will help you understand the possibilities of these technical horizons and business. Even in the future, it can cause some thoughts and inspire us to think about what it means to each person and each society. This discussion is a bit technical, and requires you to have some basic understanding of the biometric AI model. The papers and important concepts involved in the discussion will also be summarized in this episode&#x27;s summary, which is for your reference. You have worked in North America for many years, and you may have some English mistakes. Please understand. Welcome to the future. Enjoy. Let me give you a brief introduction. Some of your past experiences. A fun fact. Using an AI to represent the world is now palped.</span><br></pre></td></tr></table></figure>
<p>该接口只能将内容翻译为英语，不能翻译为其他语言。因此，Prompt
也必须更换为英语。这对我们来说有些遗憾，因为如果可以指定翻译语言，我们就可以直接将许多英文播客转录成中文。现在，为了实现这一点，我们不得不再花一份钱，让
ChatGPT 来帮我们翻译。</p>
<h2 id="通过分割音频来处理大文件">通过分割音频来处理大文件</h2>
<p>刚才我们只是尝试转录了一个3分钟的音频片段，接下来需要将整个音频转录出来。但由于OpenAI限制Whisper一次只能转录25MB大小的文件，因此我们需要先将大的播客文件分割成小的片段，转录完后再将它们拼接在一起。我们可以使用OpenAI官方文档中提供的<a
target="_blank" rel="noopener" href="https://platform.openai.com/docs/guides/speech-to-text/longer-inputs">PyDub库</a>来分割文件。</p>
<p>但在分割之前，我们需要通过FFmpeg将从listennotes下载的MP4文件转换为MP3格式。如果您不了解FFmpeg或未安装，也没有关系，ChatGPT已经编写了相应的命令。转换后的文件已经放置在课程结尾处的网盘地址中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i ./data/podcast_long.mp4 -vn -c:a libmp3lame -q:a 4 ./data/podcast_long.mp3</span><br></pre></td></tr></table></figure>
<p>分割 MP3 文件的代码也很简单。我们可以按照 15
分钟一个片段的方式把音频切分。通过 PyDub 的 AudioSegment
包，我们可以把整个长的 MP3
文件加载到内存中变成一个数组。每个数组元素代表 1
毫秒的音频数据。我们可以轻松地将数组按照时间切分成每 15
分钟一个片段的新的 MP3 文件。</p>
<p>让我们现在电脑里安装好PyDub包：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pydub</span><br></pre></td></tr></table></figure>
<p>执行如下代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pydub <span class="keyword">import</span> AudioSegment</span><br><span class="line"></span><br><span class="line">podcast = AudioSegment.from_mp3(<span class="string">&quot;./data/podcast_long.mp3&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PyDub handles time in milliseconds</span></span><br><span class="line">ten_minutes = <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">total_length = <span class="built_in">len</span>(podcast)</span><br><span class="line"></span><br><span class="line">start = <span class="number">0</span></span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> start &lt; total_length:</span><br><span class="line">    end = start + ten_minutes</span><br><span class="line">    <span class="keyword">if</span> end &lt; total_length:</span><br><span class="line">        chunk = podcast[start:end]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        chunk = podcast[start:]</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;./data/podcast_clip_<span class="subst">&#123;index&#125;</span>.mp3&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        chunk.export(f, <span class="built_in">format</span>=<span class="string">&quot;mp3&quot;</span>)</span><br><span class="line">    start = end</span><br><span class="line">    index += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>完成切分后，我们就可以一个一个地转录相应的音频文件。对应的代码如下所示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">prompt = <span class="string">&quot;这是一段Onboard播客，里面会聊到ChatGPT以及PALM这个大语言模型。这个模型也叫做Pathways Language Model。&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(index):</span><br><span class="line">    clip = <span class="string">f&quot;./data/podcast_clip_<span class="subst">&#123;i&#125;</span>.mp3&quot;</span></span><br><span class="line">    audio_file= <span class="built_in">open</span>(clip, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">    transcript = openai.Audio.transcribe(<span class="string">&quot;whisper-1&quot;</span>, audio_file, </span><br><span class="line">                                     prompt=prompt)</span><br><span class="line">    <span class="comment"># mkdir ./data/transcripts if not exists</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;./data/transcripts&quot;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&quot;./data/transcripts&quot;</span>)</span><br><span class="line">    <span class="comment"># write to file</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;./data/transcripts/podcast_clip_<span class="subst">&#123;i&#125;</span>.txt&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(transcript[<span class="string">&#x27;text&#x27;</span>])</span><br><span class="line">    <span class="comment"># get last sentence of the transcript</span></span><br><span class="line">    sentences = transcript[<span class="string">&#x27;text&#x27;</span>].split(<span class="string">&quot;。&quot;</span>)</span><br><span class="line">    prompt = sentences[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>我们对每次转录的 Prompt
进行了特殊处理：将前一片段的转录结果中的最后一句话作为下一片段的提示语。这样后一片段在语音识别时就知道前一片段最后说了什么，从而减少了错别字的出现。</p>
<h2 id="直接在本地转录">直接在本地转录</h2>
<p>使用 OpenAI 的 Whisper API 来转录音频是需要付费的，目前的定价是每分钟
0.006 美元。例如，对于上面的 150 分钟音频文件，只需要不到 1
美元就能完成转录，这已经很便宜了。但是，如果您不想将相关数据发送给
OpenAI，以避免任何数据泄露的风险，您还有另一个选择，即直接使用 OpenAI
开源的模型。</p>
<p>不过，使用开源模型仍需要具备 GPU。如果没有，仍然可以使用免费的 Colab
Notebook 环境。</p>
<p>首先，需要安装 openai-whisper 相关的依赖包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install openai-whisper</span><br><span class="line">pip install setuptools-rust</span><br></pre></td></tr></table></figure>
<p>我们只是用 Whisper 模型替换了调用 OpenAI API 的部分，稍微改动了
transcribe 参数。其他部分的代码与之前调用 OpenAI Whisper API
的代码基本相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> whisper</span><br><span class="line"></span><br><span class="line">model = whisper.load_model(<span class="string">&quot;large&quot;</span>)</span><br><span class="line">index = <span class="number">11</span> <span class="comment"># number of fi</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">transcript</span>(<span class="params">clip, prompt, output</span>):</span><br><span class="line">    result = model.transcribe(clip, initial_prompt=prompt)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(result[<span class="string">&#x27;text&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Transcripted: &quot;</span>, clip)</span><br><span class="line"></span><br><span class="line">original_prompt = <span class="string">&quot;这是一段Onboard播客，里面会聊到ChatGPT以及PALM这个大语言模型。这个模型也叫做Pathways Language Model。\n\n&quot;</span></span><br><span class="line">prompt = original_prompt</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(index):</span><br><span class="line">    clip = <span class="string">f&quot;./drive/MyDrive/colab_data/podcast/podcast_clip_<span class="subst">&#123;i&#125;</span>.mp3&quot;</span></span><br><span class="line">    output = <span class="string">f&quot;./drive/MyDrive/colab_data/podcast/transcripts/local_podcast_clip_<span class="subst">&#123;i&#125;</span>.txt&quot;</span></span><br><span class="line">    transcript(clip, prompt, output)</span><br><span class="line">    <span class="comment"># get last sentence of the transcript</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        transcript = f.read()</span><br><span class="line">    sentences = transcript.split(<span class="string">&quot;。&quot;</span>)</span><br><span class="line">    prompt = original_prompt + sentences[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>请注意，Whisper 模型有多个不同的大小选项。在 load_model
函数中选择要加载的模型时，我们选择了最大的 large 模型，需要 10GB
的显存。由于 Colab 提供的 GPU 是英伟达的 T4，具有 16G
的显存，因此可以加载此模型。如果您使用的显存较小的显卡，则可以选择 small
或 base 模型。</p>
<p>如果您只需要转录英文内容，则可以使用 small.en
这种仅限于英语的模型，速度更快。但如果您需要转录的内容主要是中文，但中间夹杂着英文，则建议使用较大的模型以提高准确率。</p>
<figure>
<img src="https://qiniu.hivan.me/picGo/20230710233219.png?imgNote"
alt="image-20230710233217956" />
<figcaption aria-hidden="true">image-20230710233217956</figcaption>
</figure>
<figure>
<img src="https://qiniu.hivan.me/picGo/20230710232923.png?imgNote"
alt="Approach" />
<figcaption aria-hidden="true">Approach</figcaption>
</figure>
<p>Whisper项目地址：https://github.com/openai/whisper</p>
<h2 id="chatgpt进行总结">ChatGPT进行总结</h2>
<p>我们可以通过API或本地GPU进行文本转录，然后得到文本并利用<a
href="../Use-AI-to-index-and-analyze-documents-and-images/">第10讲</a>中所讲的示例代码(llama-index)对其进行小结，以获得相应播客的概要。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> SpacyTextSplitter</span><br><span class="line"><span class="keyword">from</span> llama_index <span class="keyword">import</span> GPTListIndex, LLMPredictor, ServiceContext, SimpleDirectoryReader</span><br><span class="line"><span class="keyword">from</span> llama_index.node_parser <span class="keyword">import</span> SimpleNodeParser</span><br><span class="line"></span><br><span class="line"><span class="comment"># define LLM</span></span><br><span class="line">llm_predictor = LLMPredictor(llm=ChatOpenAI(temperature=<span class="number">0</span>, model_name=<span class="string">&quot;gpt-3.5-turbo&quot;</span>, max_tokens=<span class="number">1024</span>))</span><br><span class="line"></span><br><span class="line">text_splitter = SpacyTextSplitter(pipeline=<span class="string">&quot;zh_core_web_sm&quot;</span>, chunk_size = <span class="number">2048</span>)</span><br><span class="line">parser = SimpleNodeParser(text_splitter=text_splitter)</span><br><span class="line">documents = SimpleDirectoryReader(<span class="string">&#x27;./data/transcripts&#x27;</span>).load_data()</span><br><span class="line">nodes = parser.get_nodes_from_documents(documents)</span><br><span class="line"></span><br><span class="line">service_context = ServiceContext.from_defaults(llm_predictor=llm_predictor)</span><br><span class="line"></span><br><span class="line">list_index = GPTListIndex(nodes=nodes, service_context=service_context)</span><br><span class="line">response = list_index.query(<span class="string">&quot;请你用中文总结一下我们的播客内容:&quot;</span>, response_mode=<span class="string">&quot;tree_summarize&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个播客讨论了人工智能和深度学习领域的高级技术和最新发展，包括稳定性人工智能、语言模型的预训练方法、图像生成模型的训练和优化，以及各种机器学习模型的比较和应用场景。同时，我们探讨了开源社区的作用和趋势，以及开源商业化的优缺点及如何应对。我们还讨论了人工智能在各个领域的应用和未来发展趋势，并强调了找到实际应用场景和解决实际问题的重要性。最后，我们提醒说，未来值得期待的AI应用将是能够真正跟人交互的产品，对于创业公司来说，需要从用户实际的痛点出发去考虑如何更好地应用AI技术。</span><br></pre></td></tr></table></figure>
<p>用这段代码，你可以开发一个小应用，自动抓取并总结你订阅的播客内容。一般的播客时长为40-50分钟左右，所以转录并总结一期的成本应该在5元左右。</p>
<h2 id="小结">小结</h2>
<p>本讲介绍完毕。OpenAI的Whisper模型易于使用，通过API或开源模型，只需一行代码即可调用transcribe函数将音频转录成文本。即使是多语言内容，它也能很好地转录。传递提示可以添加适当的标点符号，减少转录中的错误和漏洞。虽然OpenAI的API接口限制了单个转录文件的大小，但我们可以使用Python包PyDub将音频文件切成多个小片段。</p>
<p>使用ChatGPT和llama-index对转录后的文本进行摘要。结合Whisper和ChatGPT，我们可以快速将播客、YouTube访谈等转化为文本摘要，使我们能够快速浏览并判断是否有必要深入了解原始内容。</p>
<p>我们在转录长音频时按照精确时间进行分片，但实际上音频的断句并不一定在毫秒级别。因此，录音的开头和结尾部分很可能不是完整的句子，这可能会导致转录效果不佳，出现一些错漏。是否可以利用
SRT 或 VTT 文件中的时间标注信息解决这个问题？</p>
<h2 id="文末资源">文末资源</h2>
<p>本文资源链接均可在我的公众号「坍缩的奇点」上搜索本文（19.
快速倾听和总结音频内容）之后在文末找到：</p>
<figure>
<img src="https://qiniu.hivan.me/picGo/20230704000058.png?imgNote"
alt="个人公众号：坍缩的奇点" />
<figcaption aria-hidden="true">个人公众号：坍缩的奇点</figcaption>
</figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>19. 快速倾听和总结音频内容</p><p><a href="https://hivan.me/快速倾听和总结音频内容/">https://hivan.me/快速倾听和总结音频内容/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Hivan Du</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-07-10</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-07-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/AI/">AI</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6479444288ae9600196fa98e&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="https://afdian.net/item/72907364008511ee904852540025c377" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://qiniu.hivan.me/picGo/20230601221633.jpeg" alt="支付宝"></span></a><a class="button donate" href="https://www.buymeacoffee.com/hivandu" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="https://patreon.com/user?u=89473430" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="paypal" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="doo@hivan.me"><input type="hidden" name="currency_code" value="USD"></form><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://qiniu.hivan.me/IMG_4603.JPG" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/LLMs%E7%9A%84%E5%AE%9E%E7%94%A8%E4%BB%8B%E7%BB%8D/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">LLMs的实用介绍</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/ChatGPT%E4%BB%A3%E7%A0%81%E8%A7%A3%E9%87%8A%E5%99%A8/"><span class="level-item">ChatGPT代码解释器：如何为我节省数小时的工作</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://hivan.me/%E5%BF%AB%E9%80%9F%E5%80%BE%E5%90%AC%E5%92%8C%E6%80%BB%E7%BB%93%E9%9F%B3%E9%A2%91%E5%86%85%E5%AE%B9/';
            this.page.identifier = '快速倾听和总结音频内容/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'hivan' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/bdff168cf8a71c11d2712a1679a00c54?s=128" alt="茶桁"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">茶桁</p><p class="is-size-6 is-block">AI游民</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shang Hai</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">159</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">20</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hivandu" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hivandu"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com/hivan"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/hivan"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com/hivan"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA4NzE4MDQzMg==&amp;action=getalbum&amp;album_id=2932504849574543360&amp;scene=173&amp;from_msgid=2648747980&amp;from_itemidx=1&amp;count=3&amp;nolastread=1&amp;token=1758883909&amp;lang=zh_CN#wechat_redirect"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.zhihu.com/column/c_1424326166602178560" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">塌缩的奇点</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhihu.com/column/hivandu" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">茶桁-知乎</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI%E7%A7%98%E7%B1%8D/"><span class="level-start"><span class="level-item">AI秘籍</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/AI%E7%A7%98%E7%B1%8D/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><span class="level-start"><span class="level-item">从零开始接触人工智能大模型</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-30T11:40:07.000Z">2023-07-30</time></p><p class="title"><a href="/Digital-human-broadcasting/">21. 尝试制作你自己的数字人进行播报</a></p><p class="categories"><a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/">从零开始接触人工智能大模型</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-30T10:10:12.000Z">2023-07-30</time></p><p class="title"><a href="/Python-operators/">Python operators</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-30T09:06:11.000Z">2023-07-30</time></p><p class="title"><a href="/Introduction-to-Python-scripting/">2. 初识Python脚本</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-29T11:22:20.000Z">2023-07-29</time></p><p class="title"><a href="/AI-cheats-information/">新专辑《AI秘籍》，你所感兴趣的一切</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-29T09:07:28.000Z">2023-07-29</time></p><p class="title"><a href="/Python-features-and-syntax/">1. Python的特性和语法</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="茶桁.MAMT" height="28"></a><p class="is-size-7"><span>&copy; 2023 Hivan Du</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hivandu"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>