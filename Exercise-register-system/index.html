<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>14. 练习：登录注册系统 - 茶桁.MAMT</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="茶桁.MAMT"><meta name="msapplication-TileImage" content="https://qiniu.hivan.me/picGo/20230601174411.png?imgNote"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="茶桁.MAMT"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Hi，大家好。我是茶桁。"><meta property="og:type" content="blog"><meta property="og:title" content="14. 练习：登录注册系统"><meta property="og:url" content="https://hivan.me/Exercise-register-system/"><meta property="og:site_name" content="茶桁.MAMT"><meta property="og:description" content="Hi，大家好。我是茶桁。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hivan.me/Exercise-register-system/cover.png"><meta property="og:image" content="https://hivan.me/Exercise-register-system/image-20230810145145278.png"><meta property="og:image" content="https://hivan.me/Exercise-register-system/image-20230810185215413.png"><meta property="article:published_time" content="2023-08-10T03:54:59.000Z"><meta property="article:modified_time" content="2023-08-10T11:06:03.178Z"><meta property="article:author" content="Hivan Du"><meta property="article:tag" content="Python"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hivan.me/Exercise-register-system/cover.png"><meta property="twitter:creator" content="@hivan"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hivan.me/Exercise-register-system/"},"headline":"14. 练习：登录注册系统","image":["https://hivan.me/Exercise-register-system/cover.png","https://hivan.me/Exercise-register-system/image-20230810145145278.png","https://hivan.me/Exercise-register-system/image-20230810185215413.png"],"datePublished":"2023-08-10T03:54:59.000Z","dateModified":"2023-08-10T11:06:03.178Z","author":{"@type":"Person","name":"Hivan Du"},"publisher":{"@type":"Organization","name":"茶桁.MAMT","logo":{"@type":"ImageObject","url":"https://hivan.me/img/logo.svg"}},"description":"Hi，大家好。我是茶桁。"}</script><link rel="canonical" href="https://hivan.me/Exercise-register-system/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="茶桁.MAMT" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="茶桁.MAMT" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hivandu"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-08-10T03:54:59.000Z" title="8/10/2023, 11:54:59 AM">2023-08-10</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a><span> / </span><a class="link-muted" href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></span></div></div><h1 class="title is-3 is-size-4-mobile">14. 练习：登录注册系统</h1><div class="content"><img src="/Exercise-register-system/cover.png" class="" title="封面">
<p>Hi，大家好。我是茶桁。</p>
<span id="more"></span>
<p>上一节课，我们详细的介绍了文件读写的流程和原理，并用Python进行实际操作了一下。</p>
<p>那么这节课呢，我们利用之前所学的内容，尝试做一个小练习：建立一个登录注册系统。上节课我们在结尾的时候讲练习内容贴了出来，还记得要求吗？</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">实现功能：<br><span class="hljs-bullet">1.</span> 用户输入用户名和密码以及确认密码<br><span class="hljs-bullet">2.</span> 用户名不能重复<br><span class="hljs-bullet">3.</span> 两次密码要一致<br><span class="hljs-bullet">4.</span> 用户用已经注册的账户登录<br><span class="hljs-bullet">5.</span> 密码如果错误3次，锁定，无法再登录。<br></code></pre></td></tr></table></figure>
<p>那么这节课呢，因为都是一些讲过的知识点，所以在整个实现过程中我就不详细讲解了，我们重点在于介绍思想和流程。那让我们开始吧。</p>
<h2 id="注册功能">注册功能</h2>
<p>我们先把大的结构写出来，一个注册功能，那首先需要接收两个参数：用户名、密码。</p>
<p>并且，为了防止用户注册时候输错密码导致无法登录，还需要让用户确认一遍密码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 先实现注册功能</span><br><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br><br>    <span class="hljs-comment"># 用户输入用户名</span><br>    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎注册，请输入用户名：&#x27;</span>)<br>    <br>    <span class="hljs-comment"># 用户输入密码</span><br>    password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入您的密码: &#x27;</span>)<br><br>    <span class="hljs-comment"># 请确认您的密码</span><br>    re_password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请再输入一次您的密码: &#x27;</span>)<br><br>    <span class="hljs-built_in">print</span>(username, password, re_password)<br><br><br>register()<br><br>---<br>du <span class="hljs-number">111111</span> <span class="hljs-number">111111</span><br></code></pre></td></tr></table></figure>
<p>下一步我们来细化这个框架，我们把用户名先放在一边，来挑一挑密码的刺：</p>
<p>首先，我们需要让密码保持安全性，那么我们对位数，组合就要有要求。这里我们简单点，必须输入6位以上吧。</p>
<p>然后，在确认密码的时候，肯定两次密码要一致才行。</p>
<p>OK，让我们补全这几个逻辑关系：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 先实现注册功能</span><br><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br><br>    <span class="hljs-comment"># 用户输入用户名</span><br>    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎注册，请输入用户名：&#x27;</span>)<br>    <br>    <span class="hljs-comment"># 用户名需要检测是否已经存在</span><br>    <br>    <span class="hljs-comment"># 用户输入密码</span><br>    password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入您的密码: &#x27;</span>)<br>    <br>    <span class="hljs-comment"># 检测密码长度不能低于6位</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(password) &gt;= <span class="hljs-number">6</span>:<br>        <span class="hljs-comment"># 请确认您的密码</span><br>        re_password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请再输入一次您的密码: &#x27;</span>)<br>        <span class="hljs-comment"># 检测密码和确认密码是否一致</span><br>        <span class="hljs-keyword">if</span> re_password == password:<br>            <span class="hljs-comment"># 用户名和密码都正确，可以写入文件</span><br>            <span class="hljs-keyword">pass</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;两次输入的密码不同，请重新输入。&#x27;</span>, username, password, re_password)<br><br>    <span class="hljs-comment"># 密码长度不够</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;密码格式不正确：&#x27;</span>, username, password)<br><br>register()<br><br>---<br>两次输入的密码不同，请重新输入。 du <span class="hljs-number">123456</span> <span class="hljs-number">1234567</span><br></code></pre></td></tr></table></figure>
<p>可以看得出来，我确认密码的时候输入了其他密码，判断逻辑没有问题。</p>
<p>继续来细化，现在的问题是，当我们输入第一次密码的时候判断有问题，或者两次密码输入不一致的时候，我们没有办法跳到一开始让用户重新输入，那么下面我们就来解决这个问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 先实现注册功能</span><br><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br><br>    <span class="hljs-comment"># 用户输入用户名</span><br>    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎注册，请输入用户名：&#x27;</span>)<br>    <br>    <span class="hljs-comment"># 用户名需要检测是否已经存在</span><br>    <br>    <span class="hljs-comment"># 利用循环，都正确的时候结束循环。</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># 用户输入密码</span><br>        password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入您的密码: &#x27;</span>)<br>        <br>        <span class="hljs-comment"># 检测密码长度不能低于6位</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(password) &gt;= <span class="hljs-number">6</span>:<br>            <span class="hljs-comment"># 请确认您的密码</span><br>            re_password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请再输入一次您的密码: &#x27;</span>)<br>            <span class="hljs-comment"># 检测密码和确认密码是否一致</span><br>            <span class="hljs-keyword">if</span> re_password == password:<br>                <span class="hljs-comment"># 用户名和密码都正确，可以写入文件</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;恭喜你，注册成功&#x27;</span>, username, password, re_password)<br>                <span class="hljs-comment"># 结束循环</span><br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;两次输入的密码不同，请重新输入。&#x27;</span>, username, password, re_password)<br><br>        <span class="hljs-comment"># 密码长度不够</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;密码格式不正确：&#x27;</span>, username, password)<br><br>register()<br><br>---<br>密码格式不正确： du <span class="hljs-number">12345</span><br>两次输入的密码不同，请重新输入。 du <span class="hljs-number">123456</span> <span class="hljs-number">1234567</span><br>恭喜你，注册成功 du <span class="hljs-number">123456</span> <span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure>
<p>外面套一层<code>while</code>循环，这样就解决了。</p>
<p>只有当密码正确输入的时候，循环才会结束，否则就会跳到循环的最开始，重新进行输入。</p>
<p>接着，我们就来看看当输入正确之后，我们如何写入文件呢？这个是我们上一节课刚讲解的课程，现在让我们来实现一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 先实现注册功能</span><br><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br>		...<br>            <span class="hljs-keyword">if</span> re_password == password:<br>                <span class="hljs-comment"># 用户名和密码都正确，可以写入文件</span><br>                <span class="hljs-comment"># 打开文件，写入数据</span><br>                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&#x27;UTF-8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>                    fp.write(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;username&#125;</span>:<span class="hljs-subst">&#123;password&#125;</span>\n&#x27;</span>)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;注册成功，用户名:<span class="hljs-subst">&#123;username&#125;</span>&#x27;</span>)<br>                <span class="hljs-comment"># 结束循环</span><br>                <span class="hljs-keyword">break</span><br>		...<br>register()<br><br>---<br>注册成功，用户名:du<br></code></pre></td></tr></table></figure>
<p>这样，我们就将用户名和密码以<code>username:password</code>的格式以一行的形式存储到了一个<code>user.txt</code>文件内。并且，因为我们使用的<code>a+</code>的模式，所以每次打开指针都会是放在文件的末尾进行添加。</p>
<p>来，让我们看看是否成功了：</p>
<img src="/Exercise-register-system/image-20230810145145278.png" class="" title="user.txt">
<p>可以看到，没问题。这样，我们在之后读取的时候就可以直接读取单行，并且以<code>key:value</code>的形式拿到我们说要的用户名和密码。用于验证<code>key</code>是否存在，<code>value</code>是否正确。</p>
<p>说到验证<code>key</code>是否存在，似乎我们还没写这一段验证代码，既然文件里已经有数据了，让我们把这段代码补全吧,
我们在<code>register()</code>这个自定义函数外面写一段读取文件的代码，写在外面是因为，我们读取文件这个动作，和整个注册动作不能说毫无关系，只能说是没有关联。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>    res = fp.readlines()<br>    <span class="hljs-built_in">print</span>(res)<br><br>---<br>[<span class="hljs-string">&#x27;admin:123456\n&#x27;</span>, <span class="hljs-string">&#x27;du:654321\n&#x27;</span>]<br></code></pre></td></tr></table></figure>
<p>还记得吗？<code>readlines()</code>这个函数的应用，不记得的，看我教程的上一节内容复习下。</p>
<p>看似我们确实成功的读取到了全部内容，可是我们细想一下，这样想有没有问题？还记得我们上一节课上对<code>r</code>这个模式的说明吗？<code>r</code>是读取已有文件，但是如果文件不存在，那就会报错。</p>
<p>可是我们在整个程序运行过程中，不能因为这个原因就不让用户继续往下走了对吧？那么我们怎么去修改呢？来，我们一起尝试下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 读取所有的注册信息</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>    fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>    res = fp.readlines()<br>    <span class="hljs-built_in">print</span>(res)<br><br>---<br>[<span class="hljs-string">&#x27;admin:123456\n&#x27;</span>, <span class="hljs-string">&#x27;du:654321\n&#x27;</span>]    <br></code></pre></td></tr></table></figure>
<p>我们利用<code>a+</code>的特性，如果文件不存在则会创建，如果有，这将指针放在文件末尾。这样的话，这一段内容就没有问题了？为什么不用<code>w+</code>?
还不是因为<code>w+</code>太霸道，虽然新人胜旧人，但也不能就直接把旧人干掉吧。</p>
<p>但是<code>a+</code>是将指针放在文件末尾的，我们直接使用的话，什么内容也读不到，所以我们使用可<code>seek(0,0)</code>来将指针放在了文件头的位置。</p>
<p>好了，继续。我们只将文件读取出来没用，需要将其中的数据放在一个变量里供我们检测，所以下一步，我们就需要创建一个变量，并且接收文件中的所有数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 先实现注册功能</span><br><br><span class="hljs-comment"># 专门定义数据变量，存放已经注册的用户信息</span><br>userlist = []<br>pwdlist = []<br><br><span class="hljs-comment"># 读取所有的注册信息</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>    fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) <span class="hljs-comment"># 调整指针到文件头</span><br>    res = fp.readlines() <span class="hljs-comment"># 按照每一行读取所有用户数据</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res: <span class="hljs-comment"># 循环读取每一行数据</span><br>        r = i.strip() <span class="hljs-comment"># 处理每一行尾部的换行符</span><br>        mydict = r.split(<span class="hljs-string">&#x27;:&#x27;</span>) <span class="hljs-comment"># 分隔用户名和密码</span><br>        userlist.append(mydict[<span class="hljs-number">0</span>])<br>        pwdlist.append(mydict[<span class="hljs-number">1</span>])<br>    <span class="hljs-built_in">print</span>(userlist, pwdlist)<br>    <br>---<br>[<span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;du&#x27;</span>] [<span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;654321&#x27;</span>]<br></code></pre></td></tr></table></figure>
<p>这样，我们拿到用户名和密码，并且分别放入了两个<code>list</code>变量中。</p>
<p>接下来，我们对于注册那一步就需要进行判断了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br>    ...<br>    <span class="hljs-comment"># 用户输入用户名</span><br>    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎注册，请输入用户名：&#x27;</span>)<br><br>    <span class="hljs-comment"># 用户名需要检测是否已经存在</span><br>    <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;当前用户已经存在，请更换用户名。&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># 利用循环，都正确的时候结束循环。</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># 用户输入密码</span><br>            password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入您的密码: &#x27;</span>)<br>        ...<br><br><span class="hljs-comment"># register()</span><br></code></pre></td></tr></table></figure>
<p>在代码中，我们判断用户名是否存在于列表中，如果存在，打印已经存在，如果不存在，则继续往下执行。将之前输入密码的<code>while</code>循环放入了<code>else</code>判断逻辑中。</p>
<p>看似问题解决了，不过新的问题又来了。虽然我们现在判断了用户是否存在，并且用户不存在的话可以继续往下执行，可是如果存在呢？我们需要的是让用户重新输入用户名，但是现在是打印完之后就结束了。所以，我们还得继续修改代码，这回简单了，和<code>password</code>的处理用一样的方法就可以了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br>    <span class="hljs-comment"># 执行循环， 用户名操作</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># 用户输入用户名</span><br>        username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎注册，请输入用户名：&#x27;</span>)<br><br>        <span class="hljs-comment"># 用户名需要检测是否已经存在</span><br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;当前用户已经存在，请更换用户名。&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># 利用循环，都正确的时候结束循环。</span><br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>               ...<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(password) &gt;= <span class="hljs-number">6</span>:<br>                    ...<br>                    <span class="hljs-keyword">if</span> re_password == password:<br>                        ...<br>                        <span class="hljs-comment"># 结束循环</span><br>                        <span class="hljs-keyword">break</span><br>                    <span class="hljs-keyword">else</span>:<br>                      ...<br><span class="hljs-comment"># register()</span><br></code></pre></td></tr></table></figure>
<p>我们将<code>register()</code>内的所有判断代码放入了一个循环中，那么在<code>if</code>之后，没有向下执行<code>else</code>内的逻辑的时候，就会跳转到最开始的<code>while</code>循环重新执行。</p>
<p>不过这样似乎还是不行，那就是几遍<code>else</code>逻辑全部执行完毕，内部的<code>break</code>也是跳出里面那层<code>while</code>循环，外层循环只能无限的执行下去了。</p>
<p>我们目前所要做的，就是在所有的代码顺利执行到<strong>密码正确确认</strong>的时候，整个函数执行就全部终止了。那有什么办法吗？</p>
<p>我们看到了<code>while True</code>，
然后开启了无限循环。那是不是说，如果<code>True</code>那里不为真，就无法进入循环了？</p>
<p>嗯，既然这样，我们设定一个变量，在需要终止函数的时候，设定变量为<code>Flase</code>就行了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br>    <span class="hljs-comment"># 定义一个变量，用于控制外循环</span><br>    site = <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># 执行循环， 用户名操作</span><br>    <span class="hljs-keyword">while</span> site:<br>        ...<br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;当前用户已经存在，请更换用户名。&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># 利用循环，都正确的时候结束循环。</span><br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                ...<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(password) &gt;= <span class="hljs-number">6</span>:<br>                    ...<br>                    <span class="hljs-keyword">if</span> re_password == password:<br>                        ...<br>                        <span class="hljs-comment"># 结束循环</span><br>                        <span class="hljs-comment"># 结束外循环</span><br>                        site = <span class="hljs-literal">False</span><br>                        <span class="hljs-comment"># 结束内循环</span><br>                        <span class="hljs-keyword">break</span><br>                    <span class="hljs-keyword">else</span>:<br>                        ...<br><br><span class="hljs-comment"># register()</span><br><br></code></pre></td></tr></table></figure>
<p>这样，在密码确认成功之后，<code>site</code>设定为<code>false</code>，
<code>while</code>循环判断条件为假，无法再次进入循环。执行代码，输出<code>注册成功：用户名:du2</code>，
并且跳出了循环不再继续向下执行。说明我们这一步已经没问题了。</p>
<p>那到这里，我们一个简易的可运行的注册方法就完成了，当然，这段代码中其实还有很多可以完善的空间，比如说，判断用户名是否存在之后，还要判断用户名是否合法，密码是否合法等等。还有就是我们一般接收账户密码的变量应该使用<code>key:value</code>形式的字典，不过大多数时候，我们还要考虑效率问题。分别保存成两份是不错的选择，那么这个时候，我们就需要用到获取当前字典中所有<code>key</code>值的方法了。以上代码在关键部位可以这样改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 专门定义数据变量，存放已经注册的用户信息</span><br>userdict = &#123;&#125;<br>userlist = []<br><br><span class="hljs-comment"># 读取所有的注册信息</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>    fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) <span class="hljs-comment"># 调整指针到文件头</span><br>    res = fp.readlines() <span class="hljs-comment"># 按照每一行读取所有用户数据</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res: <span class="hljs-comment"># 循环读取每一行数据</span><br>        r = i.strip() <span class="hljs-comment"># 处理每一行尾部的换行符</span><br>        mydict = r.split(<span class="hljs-string">&#x27;:&#x27;</span>)<br>        userdict.update(&#123;mydict[<span class="hljs-number">0</span>]:mydict[<span class="hljs-number">1</span>]&#125;)<br>        userlist = userdict.keys()<br>        <br><span class="hljs-comment"># 封装一个函数 完成注册功能</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>():<br>    <span class="hljs-comment"># 定义一个变量，用于控制外循环</span><br>    site = <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># 执行循环， 用户名操作</span><br>    <span class="hljs-keyword">while</span> site:<br>        <span class="hljs-comment"># 用户输入用户名</span><br>        username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎注册，请输入用户名：&#x27;</span>)<br><br>        <span class="hljs-comment"># 用户名需要检测是否已经存在</span><br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;当前用户已经存在，请更换用户名。&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            ...<br>register()<br></code></pre></td></tr></table></figure>
<p>总之，代码的实现是需要一步一步细细琢磨的，而且实现的方式也不是只有一种。要考虑逻辑，效率等等因素。文章最后会给到我的源码文件，现在大家先一步步的跟着我往下走吧。</p>
<h2 id="登录功能">登录功能</h2>
<p>在实现登录功能之前，我们来分析一下这个功能要做的事情：</p>
<ol type="1">
<li>需要使用已经注册的用户信息登录</li>
<li>密码输入错误3次之后，锁定账户信息（不能再使用这个账户进行登录操作）</li>
</ol>
<p>这是两个最基本的功能，既然要核对用户信息和密码，那和注册一样，我们还是需要读取<code>user.txt</code>文件，拿到里面的信息后传给相应的变量，用于检测。那好，我们先把注册那边实现的部分功能拿过来，就无需自己再写一遍了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 搞定登录功能</span><br><span class="hljs-comment"># 专门定义数据变量，存放已经注册的用户信息</span><br>userdict = &#123;&#125;<br>userlist = []<br><br><span class="hljs-comment"># 读取所有的注册信息</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>    fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) <span class="hljs-comment"># 调整指针到文件头</span><br>    res = fp.readlines() <span class="hljs-comment"># 按照每一行读取所有用户数据</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res: <span class="hljs-comment"># 循环读取每一行数据</span><br>        r = i.strip() <span class="hljs-comment"># 处理每一行尾部的换行符</span><br>        mydict = r.split(<span class="hljs-string">&#x27;:&#x27;</span>)<br>        userdict.update(&#123;mydict[<span class="hljs-number">0</span>]:mydict[<span class="hljs-number">1</span>]&#125;)<br>        userlist = userdict.keys()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;userdict:<span class="hljs-subst">&#123;userdict&#125;</span>,\nuserlist:<span class="hljs-subst">&#123;userlist&#125;</span>&#x27;</span>)<br><br>---<br>userdict:&#123;<span class="hljs-string">&#x27;admin&#x27;</span>: <span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;du&#x27;</span>: <span class="hljs-string">&#x27;654321&#x27;</span>, <span class="hljs-string">&#x27;du2&#x27;</span>: <span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;zhang&#x27;</span>: <span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;wang&#x27;</span>: <span class="hljs-string">&#x27;123456&#x27;</span>&#125;,<br>userlist:dict_keys([<span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;du&#x27;</span>, <span class="hljs-string">&#x27;du2&#x27;</span>, <span class="hljs-string">&#x27;zhang&#x27;</span>, <span class="hljs-string">&#x27;wang&#x27;</span>]),<br></code></pre></td></tr></table></figure>
<p>执行过后可以看到，三个变量已经分别存储了一个字典和两个列表，也就是字典存储了健值对的用户密码，以及将用户和密码再分别存储到两个列表内。</p>
<p>数据准备好了，接下来，我们开始定义函数吧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 封装登录函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br><br>    <span class="hljs-comment"># 获取用户登录时输入的用户名</span><br>    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎登录，请输入您的用户名：&#x27;</span>)<br>    <br>    <span class="hljs-comment"># 检测当前用户名是否存在</span><br>    <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>        <span class="hljs-comment"># 让用户输入密码</span><br>        <span class="hljs-keyword">pass</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># 用户名不存在</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;用户名错误，亲重新输入&#x27;</span>)<br>    <span class="hljs-comment"># 检测用户是否属于锁定状态</span><br></code></pre></td></tr></table></figure>
<p>那么大的框架就定义好了。现在让我们逐步开始细化这些代码。</p>
<p>先不看让用户继续输入密码的逻辑，我们先来看看用户名不存在的逻辑该怎么做。</p>
<p>当用户名不存在的时候，我们肯定是先要告知提示用户，接下来应该是让用户重新输入一次用户名。那怎么做呢？之前实现注册那边实际上已经有经验了，用<code>while</code>循环呗，接下来，让我们完善一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 封装登录函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <span class="hljs-comment"># 自定义变量, 控制登录外循环</span><br>    isLogin = <span class="hljs-literal">True</span> <br>    <br>    <span class="hljs-comment"># 创建循环</span><br>    <span class="hljs-keyword">while</span> isLogin:<br><br>        <span class="hljs-comment"># 获取用户登录时输入的用户名</span><br>        username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎登录，请输入您的用户名：&#x27;</span>)<br>        <br>        <span class="hljs-comment"># 检测当前用户名是否存在</span><br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                <span class="hljs-comment"># 让用户输入密码</span><br>                pwd = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入您的密码：&#x27;</span>)<br>                <span class="hljs-comment"># 检测用户输入的密码是否正确</span><br>                <span class="hljs-keyword">if</span> pwd == userdict[username]:<br>                    <span class="hljs-built_in">print</span>(pwd)<br>                    isLogin = <span class="hljs-literal">False</span> <span class="hljs-comment"># 结束外循环</span><br>                    <span class="hljs-keyword">break</span> <span class="hljs-comment"># 结束内循环</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;您的密码输入有误。&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># 用户名不存在</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;用户名错误，亲重新输入&#x27;</span>)<br><br>    <span class="hljs-comment"># 检测用户是否属于锁定状态</span><br><br>login()<br></code></pre></td></tr></table></figure>
<p>在细化的代码中，我们用了和注册函数一样的方法，创建了一个外循环和一个内循环。原因就是我们分别需要判断用户名和密码，都需要返回来重新输入。</p>
<p>之前注册的循环已经讲的比较详细了，所以这里我们就不细致的讲解了，小伙伴们自己好好琢磨一下逻辑关系。</p>
<p>那到这里，我们还缺什么呢？看看需求，我们似乎还需要判断用户输入密码错误的次数对吧？</p>
<p>好的，让我们继续，从定义变量开始：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 封装登录函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <br>    ...<br>    <span class="hljs-comment"># 定义变量，用来记录用户输入密码错误次数</span><br>    errorNum = <span class="hljs-number">3</span><br><br>    <span class="hljs-comment"># 创建循环</span><br>    <span class="hljs-keyword">while</span> isLogin:<br>        ...<br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                ...<br>                <span class="hljs-keyword">if</span> pwd == userdict[username]:<br>                    ...<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-comment"># 密码错误，修改变量次数</span><br>                    errorNum -= <span class="hljs-number">1</span><br>                    <span class="hljs-comment"># 判断当前密码错误次数</span><br>                    <span class="hljs-keyword">if</span> errorNum == <span class="hljs-number">0</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;给你机会你不中用啊细狗。账户已锁定，请联系管理人员并上供品。&#x27;</span>)<br>                        isLogin = <span class="hljs-literal">False</span><br>                        <span class="hljs-keyword">break</span><br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;您的密码输入有误, 您还能再尝试<span class="hljs-subst">&#123;errorNum&#125;</span>次。&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            ...<br><br>    <span class="hljs-comment"># 检测用户是否属于锁定状态</span><br><br>login()<br></code></pre></td></tr></table></figure>
<p>我们定义了一个<code>errorNum</code>的变量，因为我们只能尝试最多三次，所以我们给这个变量设定了一个3的值。</p>
<p>在之后的循环中，没尝试错误一次，我们就让这个变量<code>-1</code>操作，直到变为0为止。</p>
<p>然后，就是我们需要定义一个黑名单把用户名写入了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 封装登录函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    ...<br>    <span class="hljs-comment"># 创建循环</span><br>    <span class="hljs-keyword">while</span> isLogin:<br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                ...<br>                <span class="hljs-keyword">if</span> pwd == userdict[username]:<br>                    ...<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-comment"># 密码错误，修改变量次数</span><br>                    errorNum -= <span class="hljs-number">1</span><br>                    <span class="hljs-comment"># 判断当前密码错误次数</span><br>                    <span class="hljs-keyword">if</span> errorNum == <span class="hljs-number">0</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;给你机会你不中用啊细狗。账户已锁定，请联系管理人员并上供品。&#x27;</span>)<br>                        <span class="hljs-comment"># 锁定当前账户，把锁定的用户拉入黑名单</span><br>                        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/black.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&#x27;UTF-8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>                            fp.write(username+<span class="hljs-string">&#x27;\n&#x27;</span>)<br>                        isLogin = <span class="hljs-literal">False</span><br>                        <span class="hljs-keyword">break</span><br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;您的密码输入有误, 您还能再尝试<span class="hljs-subst">&#123;errorNum&#125;</span>次。&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            ...<br><br>login()<br><br>---<br>您的密码输入有误, 您还能再尝试<span class="hljs-number">2</span>次<br>您的密码输入有误, 您还能再尝试<span class="hljs-number">1</span>次<br>给你机会你不中用啊细狗。账户已锁定，请联系管理人员并上供品。<br></code></pre></td></tr></table></figure>
<p>这样，当我们的账户被输入错误三次之后，就会得到神的审判：关入小黑屋了。需要上供才行。（谁家这么设计产品，估计死的会很快吧？）</p>
<p>好了，继续往后，我们只写入了黑名单还不行，这样在执行的时候，还是无法判断用户是否输入的是锁定的账户。接下来需要做的事情，就是读取这个黑名单的文件，然后把里面的用户名全部以列表形式传到这个变量中。</p>
<p>再然后，我们只要在用户输入用户名的时候判断此用户是否被关小黑屋了就行了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 搞定登录功能</span><br><span class="hljs-comment"># 专门定义数据变量，存放已经注册的用户信息</span><br>...<br>blackUserList = [] <span class="hljs-comment"># 定义一个小黑屋专用变量</span><br><br><span class="hljs-comment"># 读取所有的注册信息</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>  	...<br><br><span class="hljs-comment"># 读取所有黑名单用户</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/black.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>    fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>    res = fp.readlines()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res:<br>        r = i.strip() <span class="hljs-comment">#</span><br>        blackUserList.append(r)<br><br><span class="hljs-comment"># 封装登录函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    ...<br>    <span class="hljs-comment"># 创建循环</span><br>    <span class="hljs-keyword">while</span> isLogin:<br><br>        <span class="hljs-comment"># 获取用户登录时输入的用户名</span><br>        username = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;欢迎登录，请输入您的用户名：&#x27;</span>)<br>        <br>        <span class="hljs-comment"># 检测当前用户名是否存在</span><br>        <span class="hljs-keyword">if</span> username <span class="hljs-keyword">in</span> blackUserList:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;您的账户已经被锁定，并且还未给管理员上供品。&#x27;</span>)<br>            isLogin = <span class="hljs-literal">False</span> <span class="hljs-comment"># 结束外循环</span><br>        <span class="hljs-keyword">elif</span> username <span class="hljs-keyword">in</span> userlist:<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                ...<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># 用户名不存在</span><br>            ...<br><br>    <span class="hljs-comment"># 检测用户是否属于锁定状态</span><br><br>login()<br></code></pre></td></tr></table></figure>
<h2 id="功能合并">功能合并</h2>
<p>现在，我们把注册和登录功能都分别完成了，那么我们现在就剩下最后一步，将两个功能合并在一起。</p>
<p>注册和登录的函数是现成的，那么现在我们要做的事情就是：</p>
<ol type="1">
<li>将读取数据的两个<code>with</code>方法封装到一个函数内</li>
<li>定义一个主函数，进入进程后就执行</li>
<li>告知用户选择登录还是注册</li>
<li>在执行登录注册函数之前，初始化数据（加载读取数据的函数）</li>
</ol>
<p>OK，让我们来实现吧：</p>
<p>首先是封装读取数据的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 定义一个读取所有用户数据的函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">readAllUsers</span>():<br>    <span class="hljs-comment"># 读取所有的注册信息</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/user.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>        <span class="hljs-keyword">global</span> userdict<br>        <span class="hljs-keyword">global</span> userlist<br>        fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) <span class="hljs-comment"># 调整指针到文件头</span><br>        res = fp.readlines() <span class="hljs-comment"># 按照每一行读取所有用户数据</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res: <span class="hljs-comment"># 循环读取每一行数据</span><br>            r = i.strip() <span class="hljs-comment"># 处理每一行尾部的换行符</span><br>            mydict = r.split(<span class="hljs-string">&#x27;:&#x27;</span>)<br>            userdict.update(&#123;mydict[<span class="hljs-number">0</span>]:mydict[<span class="hljs-number">1</span>]&#125;)<br>            userlist = userdict.keys()<br><br>    <span class="hljs-comment"># 读取所有黑名单用户</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./data/black.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>        <span class="hljs-keyword">global</span> blackUserList<br>        fp.seek(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>        res = fp.readlines()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res:<br>            r = i.strip() <span class="hljs-comment">#</span><br>            blackUserList.append(r)<br></code></pre></td></tr></table></figure>
<p>注意我们这里用了<code>global</code>,
因为我们需要使用外部定义的变量，所以必须要讲变量改成全局变量，改动才会有效。</p>
<p>注册登录函数不用改动，直接原封不动的粘贴过来就可以了。再来我们就需要直接进入主进程进行选择：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 判断当前脚本是否作为一个主进程脚本在执行</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    这里的代码，只有在使用Python解释器直接运行时才会执行</span><br><span class="hljs-string">    如果当前脚本作为了模块被其他文件导入后使用，那么这个地方的代码不会执行</span><br><span class="hljs-string">    因此这个地方的代码，适合写当前脚本中的一些测试，这样不会影响其他脚本</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment"># 调用初始化方法，加载数据</span><br>    readAllUsers()<br>    <br>    isBegin = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">while</span> isBegin:<br>        myStr = <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        ======================</span><br><span class="hljs-string">        ** 登录（0） 注册（1）**</span><br><span class="hljs-string">        ======================</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">print</span>(myStr)<br><br>        <span class="hljs-comment"># 让用户选择对应的操作</span><br>        num = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入对应的序号，体验功能：&#x27;</span>)<br>        <span class="hljs-keyword">if</span> num == <span class="hljs-string">&#x27;0&#x27;</span>:<br>            login()<br>            isBegin = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">elif</span> num == <span class="hljs-string">&#x27;1&#x27;</span>:<br>            register()<br>            isBegin = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;后续功能还在开发中。&#x27;</span>)<br>            isBegin = <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure>
<p>这样当我们输入<code>python3 file.py</code>的时候，就会直接进入这个主程序内。然后执行加载数据的函数，打印用户选择内容，然后等待用户选择并执行后续操作，如图：</p>
<img src="/Exercise-register-system/image-20230810185215413.png" class="" title="执行截图">
<p>而这其中我们设定一个变量<code>isBegin</code>来控制循环，每次执行完一次函数就会结束循环，然后需要重新执行。主要原因就是因为加载数据的方法我们写在了<code>while</code>循环外面，所以当我们注册之后再去登录，新创建的用户并不在用户列表内，无法完成登录。所以干脆结束掉之后重新加载数据，就可以执行登录了。</p>
<p>能不能改善呢？可以。只是今天的课程目的已经完毕了，所以当作留给大家的练习题吧。如何优化整个程序让其更合理高效，大家试试看。然后记得在评论区给我留言。</p>
<p>好了，这节课到这里就结束了，相关代码可以在我的仓库里去找到。</p>
<p>下一节课中，我们会讲解模块，系统的内置模块。我们下次见。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>14. 练习：登录注册系统</p><p><a href="https://hivan.me/Exercise-register-system/">https://hivan.me/Exercise-register-system/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Hivan Du</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-08-10</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-08-10</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6479444288ae9600196fa98e&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="https://afdian.net/item/72907364008511ee904852540025c377" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://qiniu.hivan.me/picGo/20230601221633.jpeg" alt="支付宝"></span></a><a class="button donate" href="https://www.buymeacoffee.com/hivandu" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="https://patreon.com/user?u=89473430" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><a class="button donate" data-type="paypal" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="doo@hivan.me"><input type="hidden" name="currency_code" value="USD"></form><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://qiniu.hivan.me/IMG_4603.JPG" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/System-built-in-modules/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">15. 系统内置模块</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/file-operations/"><span class="level-item">13. Python的文件操作</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://hivan.me/Exercise-register-system/';
            this.page.identifier = 'Exercise-register-system/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'hivan' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/bdff168cf8a71c11d2712a1679a00c54?s=128" alt="茶桁"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">茶桁</p><p class="is-size-6 is-block">AI游民</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shang Hai</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">166</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">19</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hivandu" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hivandu"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com/hivan"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/hivan"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com/hivan"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA4NzE4MDQzMg==&amp;action=getalbum&amp;album_id=2932504849574543360&amp;scene=173&amp;from_msgid=2648747980&amp;from_itemidx=1&amp;count=3&amp;nolastread=1&amp;token=1758883909&amp;lang=zh_CN#wechat_redirect"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.zhihu.com/column/c_1424326166602178560" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">塌缩的奇点</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhihu.com/column/hivandu" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">茶桁-知乎</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI%E7%A7%98%E7%B1%8D/"><span class="level-start"><span class="level-item">AI秘籍</span></span><span class="level-end"><span class="level-item tag">27</span></span></a><ul><li><a class="level is-mobile" href="/categories/AI%E7%A7%98%E7%B1%8D/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A5%E8%A7%A6%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><span class="level-start"><span class="level-item">从零开始接触人工智能大模型</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-22T05:21:59.000Z">2023-08-22</time></p><p class="title"><a href="/AI-Python-Pandas/">27. Pandas</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-21T00:41:45.000Z">2023-08-21</time></p><p class="title"><a href="/AI-Python-numpy/">26. NumPy</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-19T12:42:01.000Z">2023-08-19</time></p><p class="title"><a href="/AI-Python-matplotlib/">25. matplotlib</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-19T03:58:10.000Z">2023-08-19</time></p><p class="title"><a href="/Decorator-syntax-and-application/">24. 装饰器语法与应用</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-17T16:54:10.000Z">2023-08-18</time></p><p class="title"><a href="/OOP-Descriptor-and-design-patterns/">23. 描述符和设计模式</a></p><p class="categories"><a href="/categories/AI%E7%A7%98%E7%B1%8D/">AI秘籍</a> / <a href="/categories/AI%E7%A7%98%E7%B1%8D/Python/">Python</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="茶桁.MAMT" height="28"></a><p class="is-size-7"><span>&copy; 2023 Hivan Du</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hivandu"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>